{"version":3,"sources":["enemyGroup.js"],"names":["enemyG","cc","Class","name","properties","freqTime","initPollCount","prefab","Prefab","extends","Component","default","type","main","require","onLoad","eState","D","commonInfo","gameState","none","common","batchInitObjPool","startAction","start","i","length","fName","e","getNewEnemy","bind","schedule","pauseAction","enabled","pause","resumeAction","enemyInfo","poolName","newNode","genNewNode","node","newV2","getNewEnemyPositon","setPosition","getComponent","init","newEnemy","maxX","width","randx","Math","random","randy","parent","height","v2","enemyDied","score","backObjPool","parseInt","addScore","getScore"],"mappings":"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","file":"enemyGroup.js","sourceRoot":"../../../../assets/Script","sourcesContent":["\nvar enemyG = cc.Class({\n    name:'enemyG',\n    properties: {\n        name:'',\n        freqTime:0,\n        initPollCount:0,\n        prefab:cc.Prefab\n    }\n});\ncc.Class({\n    extends: cc.Component,\n    properties:()=>({\n        enemyG: {\n            default:[],\n            type: enemyG\n        },\n        main: {\n            default: null,\n            type: require('main'),\n        },\n    }),\n    onLoad: function () { \n        this.eState = D.commonInfo.gameState.none;\n        D.common.batchInitObjPool(this,this.enemyG);\n    },\n    startAction: function(){\n        this.eState = D.commonInfo.gameState.start;\n        for (var i=0; i< this.enemyG.length; ++i){\n            var freqTime = this.enemyG[i].freqTime;\n            var fName = 'callback_'+ i;\n            this[fName] = function(e){ this.getNewEnemy(this.enemyG[e]); }.bind(this, i);\n            this.schedule(this[fName], freqTime);\n        }\n    },\n    pauseAction: function(){\n        // cc.director.pause();\n        this.enabled = false;\n        this.eState = D.commonInfo.gameState.pause;\n    },\n    resumeAction: function(){\n        // cc.director.resume();\n        this.enabled = true;\n        this.eState = D.commonInfo.gameState.start;\n    },\n    getNewEnemy: function(enemyInfo) {\n        var poolName = enemyInfo.name + 'Pool';\n        var newNode = D.common.genNewNode(this[poolName],enemyInfo.prefab,this.node);\n        var newV2 = this.getNewEnemyPositon(newNode);\n        newNode.setPosition(newV2);\n        newNode.getComponent('enemy').init();\n    },\n    getNewEnemyPositon: function(newEnemy) {\n        var maxX = this.node.width/2;\n        var randx = (Math.random() - 0.5) * 2 *maxX;\n        var randy = this.node.parent.height/2+newEnemy.height/2;\n        return cc.v2(randx,randy);\n    },\n    enemyDied: function(node,score){\n        D.common.backObjPool(this,node);\n        if (parseInt(score)>0){\n            this.main.addScore(score);\n        }  \n    },\n    getScore: function(){\n        return this.main.getScore();\n    },\n});\n"]}