{"version":3,"sources":["../../../../assets/Script/assets/Script/hero.js"],"names":["cc","Class","extends","Component","properties","planedie","default","type","Prefab","displayName","gameOverClip","AudioClip","main","require","bulletGroup","onLoad","eState","D","commonInfo","gameState","none","director","getCollisionManager","enabled","onCollisionEnter","other","self","node","group","console","log","name","changeBullet","getItemBomb","po","getPosition","blowup","instantiate","parent","addChild","setPosition","animation","getComponent","Animation","on","onFinished","audioEngine","playEffect","destroy","gameOver","event"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAW;AAAA,eAAM;AACbC,sBAAU;AACNC,yBAAS,IADH;AAENC,sBAAKP,GAAGQ,MAFF;AAGNC,6BAAa;AAHP,aADG;AAMbC,0BAAc;AACZH,sBAAMP,GAAGW,SADG;AAEZL,yBAAS;AAFG,aAND;AAUbM,kBAAM;AACFN,yBAAS,IADP;AAEFC,sBAAMM,QAAQ,MAAR;AAFJ,aAVO;AAcbC,yBAAa;AACTR,yBAAS,IADA;AAETC,sBAAMM,QAAQ,aAAR;AAFG;AAdA,SAAN;AAAA,KAFN;AAqBLE,YAAQ,kBAAY;AAChB,aAAKC,MAAL,GAAcC,EAAEC,UAAF,CAAaC,SAAb,CAAuBC,IAArC;AACApB,WAAGqB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA0C,IAA1C;AACH,KAxBI;AAyBLC,sBAAkB,0BAASC,KAAT,EAAeC,IAAf,EAAqB;AACnC,YAAID,MAAME,IAAN,CAAWC,KAAX,IAAoB,MAAxB,EAA+B;AAC3BC,oBAAQC,GAAR,CAAYL,MAAME,IAAN,CAAWI,IAAvB;AACA,gBAAIN,MAAME,IAAN,CAAWI,IAAX,IAAmB,YAAvB,EAAoC;AAChC,qBAAKjB,WAAL,CAAiBkB,YAAjB,CAA8BP,MAAME,IAAN,CAAWI,IAAzC;AACH,aAFD,MAEO,IAAIN,MAAME,IAAN,CAAWI,IAAX,IAAmB,UAAvB,EAAkC;AACrC,qBAAKnB,IAAL,CAAUqB,WAAV;AACH;AACJ,SAPD,MAOO,IAAIR,MAAME,IAAN,CAAWC,KAAX,IAAoB,OAAxB,EAAgC;AACnC,gBAAIM,KAAK,KAAKP,IAAL,CAAUQ,WAAV,EAAT;AACA,gBAAIC,SAASpC,GAAGqC,WAAH,CAAe,KAAKhC,QAApB,CAAb;AACA,iBAAKsB,IAAL,CAAUW,MAAV,CAAiBC,QAAjB,CAA0BH,MAA1B;AACAA,mBAAOI,WAAP,CAAmBN,EAAnB;AACA,gBAAIO,YAAYL,OAAOM,YAAP,CAAoB1C,GAAG2C,SAAvB,CAAhB;AACAF,sBAAUG,EAAV,CAAa,UAAb,EAA0B,KAAKC,UAA/B,EAA2CT,MAA3C;AACApC,eAAG8C,WAAH,CAAeC,UAAf,CAA0B,KAAKrC,YAA/B,EAA6C,KAA7C;AACA,iBAAKiB,IAAL,CAAUqB,OAAV;AACA,iBAAKpC,IAAL,CAAUqC,QAAV;AACH,SAVM,MAUA;AACH,mBAAO,KAAP;AACH;AACJ,KA9CI;AA+CLJ,gBAAY,oBAASK,KAAT,EAAgB;AACxB,aAAKF,OAAL;AACH;AAjDI,CAAT","file":"hero.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties:()=> ({\n        planedie: {\n            default: null,\n            type:cc.Prefab,\n            displayName: '死亡动画',\n        },\n        gameOverClip: {\n          type: cc.AudioClip,\n          default: null\n        },\n        main: {\n            default: null,\n            type: require('main'),\n        },\n        bulletGroup: {\n            default: null,\n            type: require('bulletGroup'),\n        }\n    }),\n    onLoad: function () {\n        this.eState = D.commonInfo.gameState.none;\n        cc.director.getCollisionManager().enabled=true;\n    },\n    onCollisionEnter: function(other,self) {\n        if (other.node.group == 'item'){\n            console.log(other.node.name);\n            if (other.node.name == 'itemBullet'){\n                this.bulletGroup.changeBullet(other.node.name);\n            } else if (other.node.name == 'itemBomb'){\n                this.main.getItemBomb();\n            }\n        } else if (other.node.group == 'enemy'){\n            var po = this.node.getPosition();\n            var blowup = cc.instantiate(this.planedie);\n            this.node.parent.addChild(blowup);\n            blowup.setPosition(po);\n            var animation = blowup.getComponent(cc.Animation);\n            animation.on('finished',  this.onFinished, blowup);\n            cc.audioEngine.playEffect(this.gameOverClip, false);\n            this.node.destroy();\n            this.main.gameOver();   \n        } else {\n            return false;\n        } \n    },\n    onFinished: function(event) {\n        this.destroy(); \n    },\n});\n"]}